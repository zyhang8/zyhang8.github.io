<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">



    <link rel="dns-prefetch" href="https://Roy Z..disqus.com">



    <link rel="dns-prefetch" href="https://hm.baidu.com">



    <link rel="dns-prefetch" href="https://lib.baomitu.com">





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            空域图像增强 | 
        
        Euan&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/head_sculpture.png">
    <link rel="icon" href="/img/head_sculpture.png">

    <meta name="format-detection" content="telephone=no">
    <meta name="description" itemprop="description" content>
    <meta name="keywords" content="求知若饥 谦虚若愚,opencv">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?NKhlKQkXw/c66TR5p4wO+w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微锟斤拷锟脚猴拷", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <style>
        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: 300;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: regular;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: 500;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.svg#Roboto) format('svg')
        }
    </style>


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Euan&#39;s Blog">
    <meta name="msapplication-starturl" content="http://yoursite.com/2019/09/17/cv-exp2/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Euan&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/head_sculpture.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com/2019/09/17/cv-exp2/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="空域图像增强 | Euan&#39;s Blog">
    <meta property="og:image" content="/img/head_sculpture.png">
    <meta property="og:description" content>
    <meta property="og:article:tag" content="opencv"> 

    
        <meta property="article:published_time" content="Tue Sep 17 2019 20:19:42 GMT+0800">
        <meta property="article:modified_time" content="Sun Nov 03 2019 21:31:26 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2019/09/17/cv-exp2/index.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2019/09/17/cv-exp2/index.html",
    "headline": "空域图像增强",
    "datePublished": "Tue Sep 17 2019 20:19:42 GMT+0800",
    "dateModified": "Sun Nov 03 2019 21:31:26 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Euan",
        "image": {
            "@type": "ImageObject",
            "url": "/img/head_sculpture.png"
        },
        "description": "求知若饥,谦虚若愚"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Euan&#39;s Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/head_sculpture.png"
        }
    },
    "keywords": ",opencv求知若饥 谦虚若愚",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?5a42bcc3e66e1db4931abdcca1a9aa74';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#目的"><span class="post-toc-number">1.</span> <span class="post-toc-text">目的</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#原理"><span class="post-toc-number">2.</span> <span class="post-toc-text">原理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#步骤"><span class="post-toc-number">3.</span> <span class="post-toc-text">步骤</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#统计像素点数，打印显示"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">统计像素点数，打印显示</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#实验方式1-傻瓜式操作"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">实验方式1 傻瓜式操作</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#实现方式2-正确操作"><span class="post-toc-number">3.1.2.</span> <span class="post-toc-text">实现方式2 正确操作</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#反转变换并显示"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">反转变换并显示</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#幂律变换并显示"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">幂律变换并显示</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#双线性插值"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">双线性插值</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#直方图均衡化"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">直方图均衡化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#直方图绘制"><span class="post-toc-number">3.5.1.</span> <span class="post-toc-text">直方图绘制</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#均值滤波及中值滤波"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">均值滤波及中值滤波</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Laplace-amp-Sobel"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">Laplace&amp;Sobel</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Laplace步骤"><span class="post-toc-number">3.7.1.</span> <span class="post-toc-text">Laplace步骤</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Sobel步骤"><span class="post-toc-number">3.7.2.</span> <span class="post-toc-text">Sobel步骤</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#锐化"><span class="post-toc-number">3.7.3.</span> <span class="post-toc-text">锐化</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#源代码"><span class="post-toc-number">4.</span> <span class="post-toc-text">源代码</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                空域图像增强
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/head_sculpture.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Euan</strong>
        <span>9月 17, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACaUlEQVR42u3aUU7EMAwFwN7/0nAAaHm2k1DQ9Gu1WkomK9Xe51wf//q68PDw8PDw8PDwXsa74uvr57+59Zf37z5/d4fJ2vDw8PBO8pJ/c/dOFfyMv3tdWBseHh7eQd5zMXheUP5+8tDvrQ0PDw/vnbxqUak2zfO14eHh4b2flzTE1TKDh4eH91d4yQ/+H279+KBPoo0FQQkeHh7eEV51AHby9S/M9/Dw8PAeefMoIW9/k4HZglXh4eHhbeZNQocdsW/ScI+yFjw8PLwxL2lec/wkhO2tAQ8PD+88L3/oV0PbpDwksW/yNeDh4eGd5FVjglXHpKp/m28iHh4e3hler5nOt2YSQyTbjYeHh/cGXh7mrhqk5dFDuaXGw8PD28Zb+9DvxbjRiKs3AMPDw8NbxCs3rHGUMN+IZmuOh4eHt5nXa3Orx/EnwW5eMPDw8PDO8Jq3iBnV1rzaTDdPRuDh4eFt4+UP9ElJWBsl4+Hh4e3mJY1y8lCujvnzOKNcfvDw8PA286qMPOqdHAuYjOXw8PDwdvOqhSFpqedxcLJxW1pqPDw8vGIYsZY0Lwy9oBkPDw9vNy9vVavlJA9zk0Ky7GQEHh4e3pjXGzhVS0Ue4ybjtFHWgoeHhzfmVa9qzDofaCXHv/Dw8PBO8q74qg6lem1xb1Pw8PDwzvPyYlBto5PjCNV2vPyLAQ8PD28brzesmtxhEkbcbiUeHh7eK3l5UemVn95xBDw8PLx38qqHpfKh2rLBGB4eHt5BXi+M6AUKa8djeHh4eOd51QHYJG6YlI1DRwfw8PDwlh66ev+Fh4eHh4eHh4f3gusTkOF3y6kXfiQAAAAASUVORK5CYII=">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/opencv/">opencv</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=空域图像增强&url=http://yoursite.com/2019/09/17/cv-exp2/index.html&pic=http://yoursite.com/img/head_sculpture.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=空域图像增强&url=http://yoursite.com/2019/09/17/cv-exp2/index.html&via=Euan" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2019/09/17/cv-exp2/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=http://yoursite.com/2019/09/17/cv-exp2/index.html&title=空域图像增强" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Euan&#39;s Blog&title=空域图像增强&summary=&pics=http://yoursite.com/img/head_sculpture.png&url=http://yoursite.com/2019/09/17/cv-exp2/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><ol>
<li>掌握OPENCV中空域图像增强的一些基本方法</li>
<li>理解图像基于空域像素的处理：图像像素灰度级、点运算、逻辑运算、几何运算</li>
<li>理解图像直方图均衡化空域增强的基本原理</li>
<li>理解图像的空间滤波增强的基本原理和方法：平滑空间滤波、锐化空间滤波处理；比较不同滤波器处理的效果和优缺点</li>
</ol>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>图像的点运算、代数运算、几何运算、直方图增强、空域平滑滤波、空域锐化滤波</p>
<p>实验内容或步骤:</p>
<p>对“lena.jpg”变换后的灰度图像进行如下操作:</p>
<p>1）统计每个灰度级（0-255）的像素点数，并打印显示；<br>2）实现幂律变换,并显示；（,将其封装为一个函数，公式中的参数(c, )作为函数参数传入）<br>3）用双线性插值将图像放到1.5倍和缩小0.8倍，并显示<br>4）将图像进行直方图均衡化处理，显示图像及其直方图；<br>5）分别以3x3、7x7模板进行均值滤波(或中值滤波)处理，并显示；<br>6）分别使用拉普拉斯算子和Sobel算子对图像进行锐化处理，并显示。</p>
<p>问题讨论:</p>
<ol>
<li><p>图像像素访问一般有三种方式，选择一种使用即可<br>参考<br><a href="https://blog.csdn.net/u013921430/article/details/81114644" target="_blank" rel="noopener">https://blog.csdn.net/u013921430/article/details/81114644</a></p>
</li>
<li><p>改变图像大小（resize）<br>void resize(InputArray src, OutputArray dst, Size dsize, double fx=0, double fy=0, int interpolation=INTER_LINEAR );<br>src：输入，原图像，即待改变大小的图像；<br>dst：输出，改变大小之后的图像；<br>dsize：输出图像的大小。<br>fx和fy是图像width方向和height方向的缩放比例<br>注意：dsize和fx/fy不能同时起作用，当dsize不为空的时候，fx，fy被忽略<br>例如：resize(img, imgDst, Size(100,100));将图像缩放到指定的像素大小<br>resize(img, imgDst, Size(), 0.5, 0.5); 将图像缩小一倍<br>interpolation：指定插值的方式<br>INTER_NEAREST - 最邻近插值<br>NTER_LINEAR - 双线性插值（默认参数）<br>INTER_CUBIC - 4x4像素邻域内的双立方插值<br>INTER_LANCZOS4 - 8x8像素邻域内的Lanczos插值</p>
</li>
<li><p>直方图均衡（equalizeHist）<br><a href="https://docs.opencv.org/3.4.5/d4/d1b/tutorial_histogram_equalization.html" target="_blank" rel="noopener">https://docs.opencv.org/3.4.5/d4/d1b/tutorial_histogram_equalization.html</a><br><a href="https://docs.opencv.org/3.4.5/d8/dbc/tutorial_histogram_calculation.html" target="_blank" rel="noopener">https://docs.opencv.org/3.4.5/d8/dbc/tutorial_histogram_calculation.html</a></p>
</li>
<li><p>均值滤波（blur）中值滤波(medianBlur)<br><a href="https://docs.opencv.org/3.4.5/dc/dd3/tutorial_gausian_median_blur_bilateral_filter.html" target="_blank" rel="noopener">https://docs.opencv.org/3.4.5/dc/dd3/tutorial_gausian_median_blur_bilateral_filter.html</a></p>
</li>
<li><p>拉普拉斯算子（Laplacian）<br><a href="https://docs.opencv.org/3.4.5/d4/d86/group__imgproc__filter.html#gad78703e4c8fe703d479c1860d76429e6" target="_blank" rel="noopener">https://docs.opencv.org/3.4.5/d4/d86/group__imgproc__filter.html#gad78703e4c8fe703d479c1860d76429e6</a><br><a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/imgproc/doc/filtering.html#laplacian" target="_blank" rel="noopener">http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/imgproc/doc/filtering.html#laplacian</a></p>
</li>
<li><p>Sobel算子（Sobel）<br><a href="https://docs.opencv.org/3.0.0/d4/d86/group__imgproc__filter.html#gacea54f142e81b6758cb6f375ce782c8d" target="_blank" rel="noopener">https://docs.opencv.org/3.0.0/d4/d86/group__imgproc__filter.html#gacea54f142e81b6758cb6f375ce782c8d</a><br><a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/imgproc/doc/filtering.html#sobel" target="_blank" rel="noopener">http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/imgproc/doc/filtering.html#sobel</a></p>
</li>
</ol>
<p>实验报告要求：<br>（1）描述实验的基本原理和步骤。<br>（2）用数据和图片给出各个步骤中取得的实验结果，包括原始图像及其处理后的图像，并进行必要的讨论。<br>（3）完整的源代码。</p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="统计像素点数，打印显示"><a href="#统计像素点数，打印显示" class="headerlink" title="统计像素点数，打印显示"></a>统计像素点数，打印显示</h3><h4 id="实验方式1-傻瓜式操作"><a href="#实验方式1-傻瓜式操作" class="headerlink" title="实验方式1 傻瓜式操作"></a>实验方式1 傻瓜式操作</h4><p>灰度化原理：R=G=B</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3a1x.png" alt="KE3a1x.png"></p>
<p>灰度值0-255，则灰度级为256<br>思路：使用指针访问记录各点像素并且输入到txt中</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3YN9.png" alt="KE3YN9.png"></p>
<p>由于该图像的尺寸为500*500，则有250000个像素点</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3JAJ.png" alt="KE3JAJ.png"></p>
<p>再通过 python（比较熟悉）进行统计每一集的像素数目</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3rHe.png" alt="KE3rHe.png"></p>
<p>如图：一个键为灰度级，值为该灰度值的数目，并按键值从小到大排序</p>
<h4 id="实现方式2-正确操作"><a href="#实现方式2-正确操作" class="headerlink" title="实现方式2 正确操作"></a>实现方式2 正确操作</h4><p>指针访问记录各点像素，通过遍历每个像素值，并通过c++内嵌统计数值得出，之前做得太傻了，有轮子不用自己造……</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3yAH.png" alt="KE3yAH.png"></p>
<h3 id="反转变换并显示"><a href="#反转变换并显示" class="headerlink" title="反转变换并显示"></a>反转变换并显示</h3><p>原理: 图像颜色的反转,比较简单的思路就是使用255减去当前值,从而得到反转后的图像</p>
<p>作用: 强图像的暗区中白色或灰色的细节，特别是黑色面积在尺寸上占主导地位时</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3U91.png" alt="KE3U91.png"></p>
<h3 id="幂律变换并显示"><a href="#幂律变换并显示" class="headerlink" title="幂律变换并显示"></a>幂律变换并显示</h3><p>公式：s=cr^γ</p>
<p>其中c、γ 为常数。考虑偏移量上式可写为 s=c(ε+r)^γ</p>
<p>伽马变换可以很好地拉伸图像的对比度，扩展灰度级。</p>
<p>和s取值范围[0,1]，使用归一化处理参数</p>
<p>使用幂律变换进行对比度增强；灰度级压缩</p>
<p>函数封装：</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3thR.png" alt="KE3thR.png"></p>
<p>显示</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3dc6.png" alt="KE3dc6.png"></p>
<h3 id="双线性插值"><a href="#双线性插值" class="headerlink" title="双线性插值"></a>双线性插值</h3><p>原理：假设源图像大小为mxn，目标图像为axb。那么两幅图像的边长比分别为：m/a和n/b。注意，通常这个比例不是整数，编程存储的时候要用浮点型。目标图像的第（i,j）个像素点（i行j列）可以通过边长比对应回源图像。其对应坐标为（i<em>m/a,j</em>n/b）</p>
<p>显然，这个对应坐标一般来说不是整数，而非整数的坐标是无法在图像这种离散数据上使用的。双线性插值通过寻找距离这个对应坐标最近的四个像素点，来计算该点的值（灰度值或者RGB值）<br>双线性插值加速以及优化策略</p>
<p>这个过程很折腾，一开始还没报错，后来疯狂内存问题报错，后来花了2个小时解决了……后来重新做时，不小心改了cv的源代码……后来脑子转过来改回来正常运行</p>
<p>resize可以直接跳用函数进行放缩，通过原理的算法经过多次缩放比例实验后，发现一旦有整数的话很容易成功，如果放大1.5杯，算的过程中例如fx等参数最后时int类型，通过cout输入int原本是float类型可能类型强制转换导致最后像素值的值冲突</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3c4A.png" alt="KE3c4A.png"></p>
<h3 id="直方图均衡化"><a href="#直方图均衡化" class="headerlink" title="直方图均衡化"></a>直方图均衡化</h3><p>原理：直方图变换其实是一种灰度变换，灰度变换的变换函数决定了输入随机变量与输出随机变量之间的关系，也就是两个随机变量的关系；一副图像是二维离散的数据，不利于使用数学的工具进行处理，在数字图像处理中，我们通常是采用连续的变量进行推导，最后在推广到离散的情况。</p>
<p>作用：通过直方图均衡技术，将图像的灰度分布变得较为均匀，从而使得图像对比度增大，视觉效果更佳</p>
<ul>
<li>遍历全图，先统计每个灰度级下的像素点个数（为此我们开辟了256大小的数组）；</li>
<li>计算每个灰度级的像素点占总像素的点的比例；</li>
<li>按照第二步求出的比例重新计算每个灰度级下的新的灰度值，即均衡化；</li>
<li>依照新的灰度值表遍历更新图像的灰度值。</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/10/17/KE36Nd.png" alt="KE36Nd.png"></p>
<h4 id="直方图绘制"><a href="#直方图绘制" class="headerlink" title="直方图绘制"></a>直方图绘制</h4><p>直方图calcHist函数参数介绍</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">calcHist</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> Mat* images, <span class="comment">//源(图像)数组。应具有相同的深度(CV_8U或CV_32F)和大小。每个数组可以有任意数量的通道。</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">int</span> nimages, <span class="comment">//源图像的数量</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> <span class="keyword">int</span>* channels, <span class="comment">//用于计算直方图的dims通道列表</span></span></span></span><br><span class="line"><span class="function"><span class="params">InputArray mask, <span class="comment">//可选掩码。如果矩阵不为空，它必须是与images[i]大小相同的8位数组。</span></span></span></span><br><span class="line"><span class="function"><span class="params">OutputArray hist, <span class="comment">//输出直方图</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">int</span> dims, <span class="comment">//直方图的维度(必须是正数且不能大于CV_MAX_DIMS)</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> <span class="keyword">int</span>* histSize, <span class="comment">//每个维度中的直方图大小的数组。</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> <span class="keyword">float</span>** ranges, <span class="comment">//每个维度中直方图边界边界的dims数组的数组。</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">bool</span> uniform = <span class="literal">true</span>, <span class="comment">//指示直方图是否均匀的标志</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">bool</span> accumulate = <span class="literal">false</span> <span class="comment">//累积标志。若设置为true，分配的直方图不会被清除，用于及时更新直方图。</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.ax1x.com/2019/10/17/KE3wjK.png" alt="KE3wjK.png"></p>
<h3 id="均值滤波及中值滤波"><a href="#均值滤波及中值滤波" class="headerlink" title="均值滤波及中值滤波"></a>均值滤波及中值滤波</h3><p>均值滤波：线性平均滤波器，它通过求窗口内所有像素的平均值来得到中心像素点的像素值。这样的好处是可以有效的平滑图像，降低图像的尖锐程度，降低噪声。但缺点是不能消除噪声，而且将周围的景物的像素点平均了，变得模糊了。</p>
<p>中值滤波：如上课所说，椒盐噪声有很好的抑制作用，对模板里的像素来个简单的冒泡排序，然后求个中值代替中心点像素就ok了</p>
<p>图片中一个方块区域内，中心点的像素为全部点像素值的平均值。</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3DBD.png" alt="KE3DBD.png"></p>
<p>缺陷：均值滤波本身存在着固有的缺陷，即它不能很好地保护图像细节，在图像去噪的同时也破坏了图像的细节部分，从而使图像变得模糊，不能很好地去除噪声点。特别是椒盐噪声<br>在图像中取3*3的矩阵，里面有9个像素点，我们将9个像素进行排序，最后将这个矩阵的中心点赋值为这九个像素的中值。</p>
<p>模糊化太会过于严重。</p>
<h3 id="Laplace-amp-Sobel"><a href="#Laplace-amp-Sobel" class="headerlink" title="Laplace&amp;Sobel"></a>Laplace&amp;Sobel</h3><p>一开始看到这两个算法以为是边缘检测，后来感觉不对重新看了下题目发现是锐化。</p>
<p>边缘检测:字面意思就是在局部范围内与周围环境明显不同</p>
<h4 id="Laplace步骤"><a href="#Laplace步骤" class="headerlink" title="Laplace步骤"></a>Laplace步骤</h4><p>高斯模糊-去噪声<br>转为灰度图像<br>拉普拉斯-二阶导数计算<br>取绝对值convertScaleAbs()<br>显示结果</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE329I.png" alt="KE329I.png"></p>
<h4 id="Sobel步骤"><a href="#Sobel步骤" class="headerlink" title="Sobel步骤"></a>Sobel步骤</h4><p>高斯平滑<br>转灰度<br>求梯度xy<br>振幅图像（合并近似梯度）</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3R3t.png" alt="KE3R3t.png"></p>
<h4 id="锐化"><a href="#锐化" class="headerlink" title="锐化"></a>锐化</h4><p>Laplace原理：根据图像某个像素的周围像素到此像素的突变程度有关，也就是说它的依据是图像像素的变化程度。我们知道，一个函数的一阶微分描述了函数图像是朝哪里变化的，即增长或者降低；而二阶微分描述的则是图像变化的速度，急剧增长下降还是平缓的增长下降。那么据此我们可以猜测出依据二阶微分能够找到图像的色素的过渡程度，例如白色到黑色的过渡就是比较急剧的。<br>步骤:得到图像矩阵后，用二阶分然后再和愿图像相加</p>
<p><img src="https://s2.ax1x.com/2019/10/17/KE3WgP.png" alt="KE3WgP.png"></p>
<p>Sobel锐化也可以通过边缘检测然后和原图像相加得出<br>可以看出在边缘检测方面，sobel 产生的边缘抗噪性好，导致很多原图的像素被去除，而Laplace 对边缘敏感，可能有些是噪声的边缘，也被算进来了</p>
<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">int</span> j;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 归一化</span></span><br><span class="line"><span class="comment">//data 进行处理的像素集合</span></span><br><span class="line"><span class="comment">//grayscale 目标灰度级</span></span><br><span class="line"><span class="comment">//rows cols type 目标图像的行，列，以及类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> gray[<span class="number">256</span>] = &#123; <span class="number">0</span> &#125;;  <span class="comment">//记录每个灰度级别下的像素个数</span></span><br><span class="line"><span class="keyword">double</span> gray_prob[<span class="number">256</span>] = &#123; <span class="number">0</span> &#125;;  <span class="comment">//记录灰度分布密度</span></span><br><span class="line"><span class="keyword">double</span> gray_distribution[<span class="number">256</span>] = &#123; <span class="number">0</span> &#125;; <span class="comment">//记录累计密度</span></span><br><span class="line"><span class="keyword">int</span> gray_equal[<span class="number">256</span>] = &#123; <span class="number">0</span> &#125;; <span class="comment">//均衡化后的灰度值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> gray_sum = <span class="number">0</span>; <span class="comment">//像素总数</span></span><br><span class="line"></span><br><span class="line"><span class="function">Mat <span class="title">Normalize</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; data, <span class="keyword">int</span> grayscale, <span class="keyword">int</span> rows, <span class="keyword">int</span> cols, <span class="keyword">int</span> type)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">double</span> max = <span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">double</span> min = <span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; data.size(); i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (data[i] &gt; max)</span><br><span class="line">max = data[i];</span><br><span class="line"><span class="keyword">if</span> (data[i] &lt; min)</span><br><span class="line">min = data[i];</span><br><span class="line">&#125;</span><br><span class="line">Mat dst;</span><br><span class="line">dst.create(rows, cols, type);</span><br><span class="line"><span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; dst.rows; r++)</span><br><span class="line">&#123;</span><br><span class="line">uchar* dstRowData = dst.ptr&lt;uchar&gt;(r);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> c = <span class="number">0</span>; c &lt; dst.cols; c++)</span><br><span class="line">&#123;</span><br><span class="line">dstRowData[c] = (uchar)(grayscale * ((data[index++] - min) * <span class="number">1.0</span> / (max - min)));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dst;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 幂律变化</span></span><br><span class="line"><span class="function">Mat <span class="title">PowerTranseform</span><span class="params">(Mat src, <span class="keyword">double</span> gamma, <span class="keyword">int</span> parameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Mat dst;</span><br><span class="line">dst.create(src.size(), src.type());</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; value;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; src.rows; r++)</span><br><span class="line">&#123;</span><br><span class="line">uchar* srcRowData = src.ptr&lt;uchar&gt;(r);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> c = <span class="number">0</span>; c &lt; src.cols; c++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//幂次变换的公式为 s = c * r ^ v r为输入图像像素</span></span><br><span class="line">value.push_back(parameter * <span class="built_in">pow</span>((<span class="keyword">double</span>)srcRowData[c], gamma));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> Normalize(value, <span class="number">255</span>, src.rows, src.cols, src.type());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 双线性插值</span></span><br><span class="line"><span class="function">Mat <span class="title">bilinear</span><span class="params">(Mat src, <span class="keyword">int</span> row, <span class="keyword">int</span> col)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> rows = src.rows, cols = src.cols;</span><br><span class="line">cv::<span class="function">Mat <span class="title">dst</span><span class="params">(row, col, src.type())</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; ++i) &#123;</span><br><span class="line"><span class="comment">//以ptr的方式访问dst的数据</span></span><br><span class="line">uchar* p = dst.ptr&lt;uchar&gt;(i);</span><br><span class="line"><span class="comment">//使两个图像的几何中心重合，采样更合理</span></span><br><span class="line"><span class="keyword">float</span> x = (i + <span class="number">0.5</span>) * rows / row - <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">int</span> fx = (<span class="keyword">int</span>)x;</span><br><span class="line"><span class="comment">//x为坐标的小数部分</span></span><br><span class="line">x -= fx;</span><br><span class="line"><span class="comment">//以整数计算速度更快</span></span><br><span class="line"><span class="keyword">short</span> x1 = (<span class="number">1.f</span> - x) * <span class="number">2048</span>;</span><br><span class="line"><span class="keyword">short</span> x2 = <span class="number">2048</span> - x1;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; ++j) &#123;</span><br><span class="line"><span class="comment">//trick</span></span><br><span class="line"><span class="keyword">float</span> y = (j + <span class="number">0.5</span>) * cols / col - <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">int</span> fy = (<span class="keyword">int</span>)y;</span><br><span class="line">y -= fy;</span><br><span class="line"><span class="comment">//trick</span></span><br><span class="line"><span class="keyword">short</span> y1 = (<span class="number">1.f</span> - y) * <span class="number">2048</span>;</span><br><span class="line"><span class="keyword">short</span> y2 = <span class="number">2048</span> - y1;</span><br><span class="line"><span class="comment">//结果右移22位抵消2048的平方</span></span><br><span class="line">p[j] = (src.at&lt;uchar&gt;(fx, fy) * x1 * y1 + src.at&lt;uchar&gt;(fx + <span class="number">1</span>, fy) * x2 * y1</span><br><span class="line">+ src.at&lt;uchar&gt;(fx, fy + <span class="number">1</span>) * x1 * y2 + src.at&lt;uchar&gt;(fx + <span class="number">1</span>, fy + <span class="number">1</span>) * x2 * y2) &gt;&gt; <span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dst;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Mat <span class="title">equalize_hist</span><span class="params">(Mat&amp; input)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Mat output = input.clone();</span><br><span class="line">gray_sum = input.cols * input.rows;</span><br><span class="line"></span><br><span class="line"><span class="comment">//统计每个灰度下的像素个数</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; input.rows; i++)</span><br><span class="line">&#123;</span><br><span class="line">uchar* p = input.ptr&lt;uchar&gt;(i);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; input.cols; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> vaule = p[j];</span><br><span class="line"><span class="comment">//cout &lt;&lt; input.cols*i+j &lt;&lt; ':'&lt;&lt; vaule &lt;&lt; endl;</span></span><br><span class="line">gray[vaule]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//统计灰度频率</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">gray_prob[i] = ((<span class="keyword">double</span>)gray[i] / gray_sum);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">':'</span> &lt;&lt; gray_prob[i] * gray_sum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//均值化</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">histBar</span><span class="params">(Mat src)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> histSize = <span class="number">30</span>;</span><br><span class="line">MatND hist;</span><br><span class="line"><span class="keyword">float</span> range[] = &#123; <span class="number">0</span>, <span class="number">255</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span>* ranges = &#123; range &#125;;</span><br><span class="line"><span class="comment">//计算直方图</span></span><br><span class="line">calcHist(&amp;src, <span class="number">1</span>, <span class="number">0</span>, Mat(), hist, <span class="number">1</span>, &amp;histSize, &amp;ranges, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="comment">//将直方图bin的数值归一化到0-255</span></span><br><span class="line">normalize(hist, hist, <span class="number">0</span>, <span class="number">255</span>, NORM_MINMAX, <span class="number">-1</span>, Mat());</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示直方图</span></span><br><span class="line"><span class="keyword">int</span> binsW = cvRound((<span class="keyword">double</span>)<span class="number">500</span> / histSize);</span><br><span class="line">Mat histImg = Mat::zeros(<span class="number">500</span>, <span class="number">500</span>, CV_8UC3);</span><br><span class="line"><span class="function">RNG <span class="title">rng</span><span class="params">(<span class="number">123</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; histSize; i++)</span><br><span class="line">&#123;</span><br><span class="line">Scalar color = Scalar(rng.uniform(<span class="number">0</span>, <span class="number">255</span>), rng.uniform(<span class="number">0</span>, <span class="number">255</span>), rng.uniform(<span class="number">0</span>, <span class="number">255</span>));</span><br><span class="line">rectangle(histImg, Point(i * binsW, <span class="number">500</span>), Point((i + <span class="number">1</span>) * binsW, <span class="number">500</span> - cvRound(hist.at&lt;<span class="keyword">float</span>&gt;(i) * <span class="number">500</span> / <span class="number">255.0</span>)), color, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">imshow(<span class="string">"histogram"</span>, histImg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sharpen</span><span class="params">(<span class="keyword">const</span> Mat image, Mat&amp; result)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">result.create(image.size(), image.type());</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; image.rows - <span class="number">1</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">const</span> uchar* previous = image.ptr&lt;<span class="keyword">const</span> uchar&gt;(j - <span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> uchar* current = image.ptr&lt;<span class="keyword">const</span> uchar&gt;(j);</span><br><span class="line"><span class="keyword">const</span> uchar* next = image.ptr&lt;<span class="keyword">const</span> uchar&gt;(j + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">uchar* output = result.ptr&lt;uchar&gt;(j);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; image.cols - <span class="number">1</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//sharpened_pixel=5*current-left-right-up-down;</span></span><br><span class="line"><span class="comment">//cv::saturate_cast用以对计算结果进行截断(0-255)</span></span><br><span class="line">*output++ = saturate_cast&lt;uchar&gt;(</span><br><span class="line"><span class="number">5</span> * current[i] - current[i - <span class="number">1</span>]</span><br><span class="line">- current[i + <span class="number">1</span>] - previous[i] - next[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">result.row(<span class="number">0</span>).setTo(Scalar(<span class="number">0</span>));</span><br><span class="line">result.row(result.rows - <span class="number">1</span>).setTo(Scalar(<span class="number">0</span>));</span><br><span class="line">result.col(<span class="number">0</span>).setTo(Scalar(<span class="number">0</span>));</span><br><span class="line">result.col(result.cols - <span class="number">1</span>).setTo(Scalar(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Mat img = cv::imread(<span class="string">"lena_gray.jpg"</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> row = img.rows;<span class="comment">//获取行数</span></span><br><span class="line"><span class="keyword">int</span> col = img.cols * img.channels();<span class="comment">//注意是列数*通道数</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; row &lt;&lt; <span class="string">","</span> &lt;&lt; col &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">equalize_hist(img);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ofstream ofs("pixel.txt");</span></span><br><span class="line"><span class="comment">for (int i = 0; i &lt; row; ++i)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">uchar* data = img.ptr&lt;uchar&gt;(i);//获取第i行首地址</span></span><br><span class="line"><span class="comment">for (int j = 0; j &lt; col; ++j)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">//指针方式</span></span><br><span class="line"><span class="comment">ofs &lt;&lt; int(*data) &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">data++;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">cout &lt;&lt; row &lt;&lt; "," &lt;&lt; col &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">cout &lt;&lt; "遍历完毕" &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">cout &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">ofs.close();*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//显示原图</span></span><br><span class="line">imshow(<span class="string">"img"</span>, img);</span><br><span class="line">Mat dst;</span><br><span class="line">bitwise_not(img, dst, noArray());</span><br><span class="line"></span><br><span class="line"><span class="comment">//show image </span></span><br><span class="line">imshow(<span class="string">"dst"</span>, dst);</span><br><span class="line"></span><br><span class="line"><span class="comment">//幂律变换</span></span><br><span class="line">Mat dstImg;</span><br><span class="line">dstImg = PowerTranseform(img, <span class="number">0.4</span>, <span class="number">1</span>);</span><br><span class="line">imshow(<span class="string">"变换后"</span>, dstImg);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 双线性插值</span></span><br><span class="line">Mat scale1, scale2;</span><br><span class="line"><span class="comment">/*scale1 = bilinear(img, row * 1.5, col * 1.5);</span></span><br><span class="line"><span class="comment">imshow("1.5", scale1);</span></span><br><span class="line"><span class="comment">cv::imwrite("1.5.jpg", scale1);*/</span></span><br><span class="line">Mat dst_img1,dst_img2;</span><br><span class="line"><span class="comment">// 双线性插值(resize和源算法)</span></span><br><span class="line">resize(img, dst_img1, Size(), <span class="number">1.5</span>, <span class="number">1.5</span>);</span><br><span class="line">imshow(<span class="string">"resize_1.5"</span>, dst_img1);</span><br><span class="line">imwrite(<span class="string">"resize_1.5.jpg"</span>, dst_img1);</span><br><span class="line">resize(img, dst_img2, Size(), <span class="number">0.8</span>, <span class="number">0.8</span>);</span><br><span class="line">imshow(<span class="string">"resize_0.8"</span>, dst_img2);</span><br><span class="line">imwrite(<span class="string">"resize_0.8.jpg"</span>, dst_img2);</span><br><span class="line">scale2 = bilinear(img, row * <span class="number">0.8</span>, col * <span class="number">0.8</span>);</span><br><span class="line">imshow(<span class="string">"0.8"</span>, scale2);</span><br><span class="line">imwrite(<span class="string">"0.8.jpg"</span>, scale2);</span><br><span class="line"></span><br><span class="line">histBar(img);</span><br><span class="line"></span><br><span class="line"><span class="comment">//进行均值滤波操作</span></span><br><span class="line">Mat out;</span><br><span class="line">blur(img, out, Size(<span class="number">3</span>, <span class="number">3</span>));</span><br><span class="line">imshow(<span class="string">"均值滤波3*3"</span>, out);</span><br><span class="line">blur(img, out, Size(<span class="number">5</span>, <span class="number">5</span>));</span><br><span class="line">imshow(<span class="string">"均值滤波5*5"</span>, out);</span><br><span class="line">blur(img, out, Size(<span class="number">7</span>, <span class="number">7</span>));</span><br><span class="line">imshow(<span class="string">"均值滤波7*7"</span>, out);</span><br><span class="line"></span><br><span class="line"><span class="comment">//进行均值滤波操作</span></span><br><span class="line">Mat g_mDstImage;</span><br><span class="line">medianBlur(img, g_mDstImage, <span class="number">3</span>);</span><br><span class="line">imshow(<span class="string">"中值滤波3*3"</span>, out);</span><br><span class="line">medianBlur(img, g_mDstImage, <span class="number">5</span>);</span><br><span class="line">imshow(<span class="string">"中值滤波5*5"</span>, out);</span><br><span class="line">medianBlur(img, g_mDstImage, <span class="number">7</span>);</span><br><span class="line">imshow(<span class="string">"中值滤波7*7"</span>, out);</span><br><span class="line"></span><br><span class="line"><span class="comment">//边缘检测</span></span><br><span class="line"><span class="comment">//sobel算子</span></span><br><span class="line">Mat gao_src, gray_src, xdst, ydst, dst_sobel;</span><br><span class="line"><span class="comment">/*GaussianBlur(img, gao_src, Size(3, 3), 0, 0);//高斯滤波</span></span><br><span class="line"><span class="comment">/imshow("gaosioutput", gao_src);</span></span><br><span class="line"><span class="comment">cvtColor(gao_src, gray_src, CV_RGB2GRAY);</span></span><br><span class="line"><span class="comment">//imshow("grayoutput", gray_src);//转换为灰度图*/</span></span><br><span class="line">Sobel(img, xdst, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">imshow(<span class="string">"xdst"</span>, xdst);</span><br><span class="line">Sobel(img, ydst, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">imshow(<span class="string">"ydst"</span>, ydst);</span><br><span class="line">addWeighted(xdst, <span class="number">0.5</span>, ydst, <span class="number">0.5</span>, <span class="number">1</span>, dst_sobel);</span><br><span class="line">imshow(<span class="string">"sobel"</span>, dst_sobel);</span><br><span class="line"><span class="comment">//拉普拉斯算子</span></span><br><span class="line">Mat gaosrc, graysrc, ladst, dst_la;</span><br><span class="line"><span class="comment">/*GaussianBlur(img, gaosrc, Size(3, 3), 0);</span></span><br><span class="line"><span class="comment">//imshow("gaosrc", gaosrc);</span></span><br><span class="line"><span class="comment">cvtColor(gaosrc, graysrc, CV_RGB2GRAY);</span></span><br><span class="line"><span class="comment">//imshow("graysrc", graysrc);*/</span></span><br><span class="line">Laplacian(img, ladst, <span class="number">-1</span>);</span><br><span class="line"><span class="comment">//imshow("ladst", ladst);</span></span><br><span class="line">convertScaleAbs(ladst, dst_la);</span><br><span class="line">imshow(<span class="string">"la"</span>, dst_la);</span><br><span class="line"></span><br><span class="line"><span class="comment">//锐化</span></span><br><span class="line"><span class="comment">//拉普拉斯算子</span></span><br><span class="line">Mat la_dst, sobel_dst;</span><br><span class="line">la_dst.create(img.size(), img.type());</span><br><span class="line">sharpen(img, la_dst);</span><br><span class="line">imshow(<span class="string">"sharpen_la"</span>, la_dst);</span><br><span class="line"><span class="comment">//sobel算子</span></span><br><span class="line"><span class="comment">//Generate Gradient X</span></span><br><span class="line"><span class="comment">//imshow("sharpen_la", sobel_dst);</span></span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>); <span class="comment">// 无限制的等待用户的按键事件</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote style="margin: 2em 0 0;padding: 0.5em 1em;border-left: 3px solid #F44336;background-color: #F5F5F5;list-style: none;"><p> <strong>本文使用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" rel="noopener">CC BY-NC-SA 3.0 中国大陆</a> 协议许可<br>具体请参见 <a href="https://zyhang8.github.io/agree/" target="_blank" rel="noopener">知识共享协议</a></strong><br> <strong>本文链接：</strong><a href="https://zyhang8.github.io/2019/09/17/cv-exp2/" target="_blank" rel="noopener">https://zyhang8.github.io/2019/09/17/cv-exp2/</a></p></blockquote>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 DISQUS -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2019/09/17/cv-exp2/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2019/09/17/cv-exp2/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>
<script type="text/ls-javascript" id="disqus-thread-script">
    queue.offer(function() {
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//Roy Z..disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2019/09/18/amazon-oracle/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2019/09/16/requirement-exp8/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/head_sculpture.png" alt="Euan's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        ruadhan@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:ruadhan@qq.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/12/">十二月 2019<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">26</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="sidebar_archives-count">29</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/09/">九月 2019<span class="sidebar_archives-count">28</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/07/">七月 2019<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/06/">六月 2019<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Database/">Database<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/IT项目管理/">IT项目管理<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/">android<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/c/">c++<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/j2ee/">j2ee<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/java/">java<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/letex/">letex<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/linux/">linux<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/lua/">lua<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/opencv/">opencv<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/oracle/">oracle<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/python/">python<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/scrapy/">scrapy<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/书籍/">书籍<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/企业/">企业<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/信息安全/">信息安全<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/categories/前端/">前端<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/开箱/">开箱<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/心理学/">心理学<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/机器学习/">机器学习<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/测试/">测试<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/游记/">游记<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/笔记/">笔记<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/算法/">算法<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算机网络/">计算机网络<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/设计模式/">设计模式<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/评测/">评测<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/需求分析/">需求分析<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/鱼的记忆/">鱼的记忆<span class="sidebar_archives-count">9</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">table</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                时间轴
            </a>
        </li>
        
    
        <li>
            <a href="/video" title="目之所及">
                
                    <i class="material-icons sidebar-material-icons">movie</i>
                
                目之所及
            </a>
        </li>
        
    
        <li>
            <a href="/gallery" title="图库">
                
                    <i class="material-icons sidebar-material-icons">collections</i>
                
                图库
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="好朋友">
                
                    <i class="material-icons sidebar-material-icons">favorite_border</i>
                
                好朋友
            </a>
        </li>
        
    
        <li>
            <a href="/PGP" title="PGP密钥">
                
                    <i class="material-icons sidebar-material-icons">vpn_key</i>
                
                PGP密钥
            </a>
        </li>
        
    
        <li>
            <a href="/agree" title="知识共享协议">
                
                    <i class="material-icons sidebar-material-icons">https</i>
                
                知识共享协议
            </a>
        </li>
        
    
        <li>
            <a href="/me" title="关于Euan">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于Euan
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">112</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/WTOJL7dDTsa8Dcd" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/zyhang8" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https:www.github.com/zyhang8" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;Euan's Blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- 使用 DISQUS js 代码 -->
<script id="dsq-count-scr" src="//Roy Z..disqus.com/count.js" async></script>





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 2017;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
